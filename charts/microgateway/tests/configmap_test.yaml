suite: test configmap
release:
  name: my-microgateway
chart:
  version: 1.0.1

tests:
  - it: should be ConfigMap
    asserts:
      - isKind:
          of: ConfigMap
    template: configmap.yaml

  - it: dsl example
    values:
      - ./values/dsl.yaml
    asserts:
      - matchSnapshot:
          path: data.[config.yaml]
    template: configmap.yaml

  - it: should be no configmap if one is provided
    set:
      config:
        dslConfigMap: testmap
    asserts:
      - hasDocuments:
          count: 0  
    template: configmap.yaml
